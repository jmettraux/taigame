<html>
  <head>
    <title>
      Taigame v1.0
    </title>
    <link rel="stylesheet" href="game.css" />
    <script src="libs/jquery-1.9.1.min.js"></script>
  </head>
  <body>

    <table class="grid">
    </table>

    <script>
      var w = 10;
      var h = 10;

      for (var i = 0; i < h; i++) {
        var tr = $('table.grid').append($('<tr>'));
        for (var ii = 0; ii < w; ii++) {
          $('tr:last-child').append('<td>');
        }
      }

      var world = {};

      world.display = function() {

        // make all cells white

        $('td').css('background-color', 'white');

        // display car

        var carRow = $('tr')[this.car.y];
        var carCell = $(carRow).find('td')[this.car.x];
        $(carCell).css('background-color', 'red');
      }

      //
      // car concept

      var car = { x: 0, y: 9 };

      car.move = function(direction) {

        if (direction === 'left') this.x = this.x - 1;
        else if (direction === 'up') this.y = this.y - 1;
        else if (direction === 'right') this.x = this.x + 1;
        else if (direction === 'down') this.y = this.y + 1;

        if (this.x < 0) { this.x = 0; }
        else if (this.x > w - 1) { this.x = w - 1; }
        if (this.y < 0) { this.y = 0; }
        else if (this.y > h - 1) { this.y = h - 1; }
      };

      world.car = car;

      //
      // change the world

      world.display();

      $(window).on('keyup', function(ev) {

        if (ev.keyCode === 37) car.move('left');
        else if (ev.keyCode === 38) car.move('up');
        else if (ev.keyCode === 39) car.move('right');
        else if (ev.keyCode === 40) car.move('down');

        world.display();
      });
    </script>
  </body>
<html>
